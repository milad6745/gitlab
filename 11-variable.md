## Variable

در GitLab، **متغیرها (Variables)** مقادیر پیکربندی هستند که می‌توانید در pipelineهای CI/CD خود استفاده کنید. این متغیرها به شما امکان می‌دهند که مقادیر خاص را در زمان اجرای pipeline مدیریت و به‌طور دینامیک تنظیم کنید. متغیرهای GitLab به چندین دسته تقسیم می‌شوند و در موقعیت‌های مختلف قابل استفاده هستند.

### انواع متغیرها در GitLab

1. **متغیرهای محیطی (Environment Variables):**
   این متغیرها برای تنظیم مقادیر محیطی که در زمان اجرای jobهای CI/CD به آن‌ها نیاز دارید، استفاده می‌شوند. به عنوان مثال، برای ذخیره کلیدهای API، نام‌های کاربری، یا مقادیر تنظیمات.

2. **متغیرهای پروژه (Project Variables):**
   این متغیرها برای پروژه‌های خاص تعریف می‌شوند و در تنظیمات پروژه قرار می‌گیرند. این متغیرها به صورت سراسری برای تمام jobها و مراحل در پروژه مورد استفاده قرار می‌گیرند.

3. **متغیرهای گروهی (Group Variables):**
   این متغیرها برای تمام پروژه‌های درون یک گروه GitLab تعریف می‌شوند و می‌توانند در چندین پروژه مشترک باشند.

4. **متغیرهای سیستمی (Instance Variables):**
   این متغیرها برای تمام پروژه‌های موجود در یک instance GitLab تعریف می‌شوند و مقادیر مشترکی را برای تمام پروژه‌ها فراهم می‌کنند.

5. **متغیرهای Runner (Specific Runner Variables):**
   این متغیرها به طور خاص برای هر Runner تعریف می‌شوند و می‌توانند برای پیکربندی خاص Runnerها مورد استفاده قرار گیرند.

### کاربردهای متغیرها

1. **مدیریت اطلاعات محرمانه:**
   شما می‌توانید متغیرهای محرمانه مانند کلیدهای API، رمزهای عبور، و دیگر اطلاعات حساس را به صورت امن ذخیره کنید. این اطلاعات به صورت مستقیم در فایل‌های کد ذخیره نمی‌شود و به صورت امن در محیط CI/CD استفاده می‌شود.

2. **پیکربندی متغیرات محیطی:**
   متغیرها به شما این امکان را می‌دهند که محیط‌های مختلف (مثل محیط توسعه، تست، و تولید) را با استفاده از مقادیر مختلف برای هر محیط پیکربندی کنید. این امر باعث می‌شود که همان pipeline بتواند در محیط‌های مختلف به درستی اجرا شود.

3. **افزایش قابلیت تنظیم:**
   با استفاده از متغیرها می‌توانید مقادیر متغیر را در زمان اجرا تغییر دهید بدون اینکه نیاز به تغییر در کد pipeline خود داشته باشید.

4. **مدیریت وابستگی‌ها:**
   متغیرها می‌توانند به عنوان ورودی‌های خاص برای jobها مورد استفاده قرار گیرند و وابستگی‌های خاصی را مدیریت کنند.

### نحوه تعریف و استفاده از متغیرها

#### تعریف متغیرها

**الف. متغیرهای پروژه:**
   - به پروژه خود در GitLab بروید.
   - وارد بخش **Settings > CI/CD** شوید.
   - در بخش **Variables**، می‌توانید متغیرهای جدید اضافه کنید.

**ب. متغیرهای گروهی:**
   - به گروهی که پروژه‌ها در آن قرار دارد بروید.
   - وارد **Settings > CI/CD** شوید.
   - در بخش **Variables**، متغیرهای جدید اضافه کنید.

**ج. متغیرهای سیستمی:**
   - برای اضافه کردن یا ویرایش متغیرهای سیستمی، به تنظیمات سیستم GitLab بروید و متغیرها را در بخش مربوطه اضافه کنید.

#### استفاده از متغیرها در `.gitlab-ci.yml`

شما می‌توانید از متغیرها در فایل `.gitlab-ci.yml` استفاده کنید به این صورت:

```yaml
variables:
  DATABASE_URL: "postgres://user:password@localhost:5432/dbname"

build:
  stage: build
  script:
    - echo "Connecting to database at $DATABASE_URL"
```

### ٍExample
```
job1:
  script:
    - echo $CI_COMMIT_MESSAGE 
    - echo $CI_JOB_NAME
```
![image](https://github.com/user-attachments/assets/ccd4d553-71c5-4ceb-a700-1a03b1bb19ca)

