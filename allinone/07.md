ุนุงูู! ุฑุณุฏู ุจู **ูุณูุช ธ: ูฺฉุงุช ุญุฑููโุง ู ูพุดุฑูุชู ุฏุฑ GitLab CI/CD** โ ุฌุง ฺฉู ุงุฏ ูโฺฏุฑ ฺุทูุฑ pipeline ุฑู ุชูุฒุ ูุงุจู ูุฏุฑุชุ ู ูุงุจู reuse ุจููุณ ู ููฺูู ฺุทูุฑ ุงุฒ ูพุฑูฺูโูุง ุฏฺฏู ุง ุงุจุฒุงุฑูุง ุฎุงุฑุฌ ุงุณุชูุงุฏู ฺฉู.

---

## ๐น ูุณูุช ธ: ูฺฉุงุช ุญุฑููโุง ู ุชุฑฺฉุจ ุฏุฑ GitLab CI/CD

---

### โ ฑ. ุงุณุชูุงุฏู ุงุฒ `include:` ุจุฑุง ุชูุณู ูุงูโูุง `.gitlab-ci.yml`

ููุช pipeline ุจุฒุฑฺฏ ูโุดูุ ุจูุชุฑู ฺูุฏ ูุงู ุฏุงุดุชู ุจุงุด ู ุงููโูุง ุฑู ุฌุฏุงฺฏุงูู ูุฏุฑุช ฺฉู.

```yaml
include:
  - local: 'ci/build.yml'
  - local: 'ci/test.yml'
  - local: 'ci/deploy.yml'
```

๐ ุงู ูุงูโูุง ุจุงุฏ ุฏุฑ ุฑูพุงุฒุชูุฑ ูพุฑูฺู ุจุงุดู.

ุฏฺฏุฑ ุงููุงุน `include`:

| ููุน         | ูุซุงู                                                         |
| ----------- | ------------------------------------------------------------ |
| `local:`    | ูุงู ุฏุฑ ููู ูพุฑูฺู                                          |
| `project:`  | ูุงู CI ุงุฒ ูพุฑูฺู ุฏฺฏู                                        |
| `remote:`   | URL ุจู ฺฉ ูุงู YAML                                          |
| `template:` | ุชููพูุชโูุง ุขูุงุฏู GitLab (ูุซู: `Security/SAST.gitlab-ci.yml`) |

---

### โ ฒ. DRY ฺฉุฑุฏู pipeline ุจุง `extends:`

ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ุฒุงุฏุ ูโุชูู ู ูุงูุจ ุชุนุฑู ฺฉู:

```yaml
.default-job-template:
  script:
    - echo "Hello"
  tags:
    - docker

job1:
  extends: .default-job-template
  script:
    - echo "Job 1 running"
```

๐โ `extends:` ุจุงุนุซ ูุดู job ุงุฒ ู ูุงูุจ ูพุดโูุฑุถ ุงุณุชูุงุฏู ฺฉูู ู ููุท ูุณูุชโูุง ุฎุงุต ุฎูุฏุด ุฑู override ฺฉูู.

---

### โ ณ. ุงุณุชูุงุฏู ุงุฒ `trigger` ุจุฑุง ุงุฌุฑุง pipeline ูพุฑูฺูโูุง ุฏฺฏุฑ

ูุฑุถ ฺฉู ุฏู ูพุฑูฺู ุฏุงุฑ: frontend ู backend. ูโุฎูุง ููุช backend ุขูพุฏุช ุดุฏุ frontend ูู build ุจุดู.

```yaml
trigger_frontend:
  stage: deploy
  trigger:
    project: group/frontend
    branch: main
```

๐ ุงูฺฉุงุฑ ุจุงุนุซ ูุดู pipeline ูพุฑูฺู frontend ุงุฒ ูพุฑูฺู backend ุดุฑูุน ุจุดู.

---

### โ ด. ุงุณุชูุงุฏู ุงุฒ Child Pipelines (ูุงุจุณุชู ุง ุฏูุงูฺฉ)

```yaml
stages:
  - trigger

trigger-child:
  stage: trigger
  trigger:
    include: path/to/child-pipeline.yml
```

> ุงู pipeline ฺฉ pipeline ุฏฺฏุฑ ุฑู ุงุฒ ูููู ูพุฑูฺู ุงุฌุฑุง ูโฺฉูู.

---

### โ ต. Conditional Execution ุจุง `rules:` ู `only/except`

#### ุญุงูุช ุฌุฏุฏ (rules):

```yaml
job:
  script: echo "Run only on dev branch"
  rules:
    - if: '$CI_COMMIT_BRANCH == "dev"'
```

#### ุญุงูุช ูุฏู:

```yaml
job:
  script: echo "Run only on dev"
  only:
    - dev
```

> ๐ ุชูุตู GitLab: ุงุฒ `rules:` ุงุณุชูุงุฏู ฺฉู ฺูู ุงูุนุทุงูโูพุฐุฑุชุฑู.

---

### โ ถ. ูุงูุชูุฑูฺฏ ู ุฏุจุงฺฏ

#### ูุดุงูุฏู ูุถุนุช pipeline:

* UI โ CI/CD โ Pipelines โ ูุฑ pipeline โ ูุดุงูุฏู jobูุง

#### ูุนุงู ฺฉุฑุฏู debug log:

```yaml
variables:
  CI_DEBUG_TRACE: "true"
```

๐ ุงูฺฉุงุฑ ุจุงุนุซ ูโุดู ุชูุงู ุฏุณุชูุฑุงุช ุฏุฑ log ุฏูู ุซุจุช ุจุดู. ุจุฑุง ุฑูุน ุฎุทุงูุง ุนุงูู (ูู ุฏุฑ ุญุงูุช ุนุงุฏ ูุนุงู ูฺฉู).

---

### โ ท. ุงุณุชูุงุฏู ุงุฒ `needs:` ุจุฑุง ุจูููโุณุงุฒ ุชุฑุชุจ ุงุฌุฑุง

```yaml
job1:
  stage: test
  script: run-tests

job2:
  stage: deploy
  script: deploy
  needs:
    - job1
```

โ ุจุงุนุซ ูุดู job2 **ูุณุชูู ุจุนุฏ ุงุฒ job1 ุงุฌุฑุง ุจุดู**ุ ุญุช ุงฺฏุฑ jobูุง ุฏฺฏู ุชู ูููู stage ูุณุชู.

---

### โ ธ. ุงุณุชูุงุฏู ุงุฒ Pipeline Templates ุขูุงุฏู GitLab

GitLab ู ุณุฑ ุชููพูุช ุขูุงุฏู ุจุฑุง ููุงุฑุฏ ุฒุฑ ุฏุงุฑู:

* Code Quality
* SAST (Security)
* Container Scanning
* License Compliance

ูุซุงู:

```yaml
include:
  - template: Security/SAST.gitlab-ci.yml
```

---

### ๐ง ูฺฉุงุช ุญุฑููโุง ุจุฑุง ูุตุงุญุจู:

| ุณุคุงู                                                | ูพุงุณุฎ ุฎูุงุตู                                                  |
| --------------------------------------------------- | ----------------------------------------------------------- |
| ฺุทูุฑ pipeline ุฑู DRY ูฺฏู ูโุฏุงุฑุ                   | ุจุง `extends:` ู `include:`                                  |
| ฺุทูุฑ ูโุชูู pipeline ูพุฑูฺู ุฏฺฏูโุง ุฑู trigger ฺฉูุ | ุจุง `trigger:` ู ุชุนุฑู `project:` ู `branch`                 |
| ูุฑู `include: remote` ู `project:` ฺูุ             | `remote:` ุงุฒ URL ูโุฎูููุ `project:` ุงุฒ ู ูพุฑูฺู GitLab     |
| ฺฉ ุงุฒ Child Pipelines ุงุณุชูุงุฏู ูโฺฉูุ               | ููุช ูุงุฒ ุจู multi-config pipeline ุง multi-team setup ุฏุงุฑ |

---

## โ ุฌูุนโุจูุฏ ฺฉู ุฏูุฑู:

ุชุง ุงูุงู ุงุฏ ฺฏุฑูุช:

| ูุณูุช | ููุถูุน                        |
| ---- | ---------------------------- |
| ฑ    | ุณุงุฎุชุงุฑ ูุงู `.gitlab-ci.yml` |
| ฒ    | ูุฑุงุญู ุงุฌุฑุง pipeline         |
| ณ    | Job ู Stage                  |
| ด    | GitLab Runner                |
| ต    | artifacts ู cache            |
| ถ    | Environment Variables        |
| ท    | Deployment ู Environments    |
| ธ    | ูฺฉุงุช ุญุฑููโุง ู ูพุดุฑูุชู       |

---

ุงฺฏู ุจุฎูุงุ ูโุชููู ู PDF ุฎูุงุตู ูููโ ุงู ธ ูุณูุช ุฑู ูู ุจุฑุงุช ุขูุงุฏู ฺฉูู ุง ู ูพุฑูฺู ุชูุฑู ฺฉุงูู ุฏุฑุณุช ฺฉูู ุจุฑุง ูุฑูุฑ ุนูู.
ฺุฒ ุฏฺฏูโุง ูู ูุณุช ฺฉู ุจุฎูุง ุชู GitLab CI/CD ุจุดุชุฑ ุจุฑุฑุณ ฺฉููุ
