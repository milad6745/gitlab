ุนุงู! ุจุฑู ุณุฑุงุบ **ูุณูุช ณ: Jobูุง ู Stageูุง ุฏุฑ GitLab CI/CD** โ ุฌุง ฺฉู ูุงูุนุง ูุฑุขูุฏ ุงุฌุฑุง pipeline ุดฺฉู ูโฺฏุฑู.

---

## ๐น ูุณูุช ณ: ุชุนุฑู ุฏููโุชุฑ Job ู Stage ุฏุฑ GitLab CI/CD

### โ ุชูุงูุช Job ู Stage:

| ููููู     | ุชูุถุญ                                                               |
| --------- | ------------------------------------------------------------------- |
| **Stage** | ูุฑุญููโุง ุงุฒ pipeline (ูุซู: buildุ testุ deploy)                     |
| **Job**   | ฺฉ ุชุณฺฉ ูุดุฎุต ุฏุฑูู ฺฉ Stage (ูุซู: `compile-code` ุง `run-unit-tests`) |

> โ Jobูุง ุฏุฑ ฺฉ Stage **ุจู ุตูุฑุช ููุงุฒ** ุงุฌุฑุง ูโุดูุ ูู Stageูุง **ุจู ุชุฑุชุจ** ุงุฌุฑุง ูโุดู.

---

### โ ุชุนุฑู Stageูุง

```yaml
stages:
  - build
  - test
  - deploy
```

Pipeline ุดูุง ุณู ูุฑุญูู ุฎูุงูุฏ ุฏุงุดุช. Stageูุง ุจู ุชุฑุชุจ ุงุฌุฑุง ูโุดู.

---

### โ ุชุนุฑู Job ุฏุฑ Stage

```yaml
compile:
  stage: build
  script:
    - echo "Compiling the code..."

unit-tests:
  stage: test
  script:
    - echo "Running unit tests..."

deploy-prod:
  stage: deploy
  script:
    - echo "Deploying to production..."
```

* `compile` ฺฉ job ุงุณุช ุฏุฑ stage `build`
* `unit-tests` ุฏุฑ stage `test`
* `deploy-prod` ุฏุฑ stage `deploy`

> ุชุฑุชุจ ุงุฌุฑุง: ุงูู `compile` โ ุจุนุฏ `unit-tests` โ ุจุนุฏ `deploy-prod`

---

### โ ุงุฌุฑุง ููุงุฒ Jobูุง ุฏุฑ ฺฉ Stage

```yaml
stages:
  - test

test-1:
  stage: test
  script: echo "Running test 1"

test-2:
  stage: test
  script: echo "Running test 2"
```

โฑ ุงู ุฏู job **ููุฒูุงู** ุงุฌุฑุง ูโุดู ฺูู ูุฑ ุฏู ุชู stage `test` ูุณุชูุฏ.

---

### โ ุงุณุชูุงุฏู ุงุฒ `needs:` ุจุฑุง ุงุฌุฑุง job ุฎุงุฑุฌ ุงุฒ ุชุฑุชุจ

```yaml
stages:
  - build
  - test

build-job:
  stage: build
  script: echo "Build done"

test-job:
  stage: test
  script: echo "Test done"
  needs:
    - build-job
```

> `test-job` ููุท ููุช ุงุฌุฑุง ูุดู ฺฉู `build-job` ุชููู ุจุดูุ ูู ููฺฉูู **ุฒูุฏุชุฑ ุงุฒ ุจูู Jobูุง stage build ุงุฌุฑุง ุจุดู**.

โ `needs:` ุจุฑุง **ุงุฌุฑุง ููุงุฒ ุจู Stageูุง** ููุฏู ู ุณุฑุนุช ุงุฌุฑุง pipeline ุฑู ุฒุงุฏ ูโฺฉูู.

---

### โ ูุฏุฑุช Job ุจุง ุฎุตูุตุงุช ุงุถุงู

| ูฺฺฏ                 | ูุซุงู                                        | ุชูุถุญ |
| --------------------- | ------------------------------------------- | ----- |
| `allow_failure: true` | ุงฺฏุฑ Job fail ุจุดูุ ฺฉู pipeline ุดฺฉุณุช ููโุฎูุฑู |       |
| `retry: 2`            | ุงฺฏุฑ Job fail ุดุฏุ ุชุง ฒ ุจุงุฑ ุฏูุจุงุฑู ุงุฌุฑุง ูุดู  |       |
| `timeout: 10 minutes` | ุฒูุงู ูุฌุงุฒ ุงุฌุฑุง ุจุฑุง Job                     |       |
| `when: manual`        | Job ุจุงุฏ ุฏุณุช ุงุฌุฑุง ุจุดู                      |       |
| `dependencies:`       | ุชุนู ูุงูโูุง ฺฉู ุงุฒ jobูุง ูุจู ูุงุฒู ุฏุงุฑ |       |

---

### โ ูุซุงู ฺฉุงููโุชุฑ

```yaml
stages:
  - build
  - test
  - deploy

build:
  stage: build
  script:
    - npm install
    - npm run build
  artifacts:
    paths:
      - dist/

test:
  stage: test
  script:
    - npm test
  dependencies:
    - build

deploy:
  stage: deploy
  script:
    - echo "Deploying..."
  when: manual
```

---

### โ ุฎูุงุตู ูฺฉุงุช ฺฉูุฏ

* ูุฑ job ุจุงุฏ `stage` ุฏุงุดุชู ุจุงุดู.
* Stageูุง ุจู ุชุฑุชุจุ jobูุง ุฏุฑูู ูุฑ stage ุจู ุตูุฑุช ููุงุฒ ุงุฌุฑุง ูโุดู.
* ุจุง `needs:` ูโุชูู jobูุง stageูุง ุจุนุฏ ุฑู ุฒูุฏุชุฑ ุงุฌุฑุง ฺฉู.
* ุงุฒ `allow_failure`, `retry`, `manual` ุจุฑุง ฺฉูุชุฑู ุจูุชุฑ ุงุณุชูุงุฏู ฺฉู.

---

ุงฺฏู ุขูุงุฏู ุจุงุดุ ุฏุฑ **ูุณูุช ด** ุจุฑู ุณุฑุงุบ GitLab Runner: ุงููุงุนุดุ ูุตุจุ ุงุชุตุงูุ ู ุงูฺฉู ฺฉุฌุง ุงุฌุฑุง ูโุดู.
ุจุฑูุ
