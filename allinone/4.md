ุนุงูู! ุจุฑู ุณุฑุงุบ **ูุณูุช ด: GitLab Runner** โ ฺฉ ุงุฒ ูููโุชุฑู ุงุฌุฒุง GitLab CI/CD.

---

## ๐น ูุณูุช ด: GitLab Runner

### ๐ง GitLab Runner ฺูุ

**GitLab Runner** ู ุจุฑูุงููโ ุณุจฺฉ ูุณุช ฺฉู jobูุง ุชุนุฑูโุดุฏู ุชู ูุงู `.gitlab-ci.yml` ุฑู ุงุฌุฑุง ูโฺฉูู.

> ููุช ุดูุง ู commit ุง merge ุงูุฌุงู ูโุฏุฏุ GitLab ุฏุณุชูุฑ ุงุฌุฑุง pipeline ุฑู ูโุฏูุ ู Runner ุงูู jobูุง ุฑู ุงุฌุฑุง ูโฺฉูู.

---

### โ ุงููุงุน GitLab Runner

| ููุน                 | ุชูุถุญ                                                                                 |
| ------------------- | ------------------------------------------------------------------------------------- |
| **Shared Runner**   | ุชูุณุท GitLab ุจุฑุง ููู ูพุฑูฺูโูุง ุงุฑุงุฆู ูโุดู (ุฏุฑ GitLab.com).                            |
| **Specific Runner** | ููุท ุจู ฺฉ ุง ฺูุฏ ูพุฑูฺู ุฎุงุต ุงุฎุชุตุงุต ุฏุงุฏู ูโุดู (ุฑู ูุงุดู ุดุฎุต ุง ุณุฑูุฑ ุดุฑฺฉุช ูุตุจ ูโุดู). |
| **Group Runner**    | ุจู ููู ูพุฑูฺูโูุง ุฏุงุฎู ฺฉ Group ูุชุตู ูโุดู.                                            |

---

### โ Executorูุง ุฏุฑ Runner

Runner ูโุชููู jobูุง ุฑู ุจุง ุฑูุดโูุง ูุฎุชูู ุงุฌุฑุง ฺฉูู:

| Executor         | ุชูุถุญ                                                   |
| ---------------- | ------------------------------------------------------- |
| `shell`          | ุงุฌุฑุง ูุณุชูู job ุจุง ุงุณุชูุงุฏู ุงุฒ Shell (Bash, PowerShell) |
| `docker`         | ุงุฌุฑุง job ุฏุงุฎู container ูุณุชูู                          |
| `docker+machine` | ุณุงุฎุช ุฎูุฏฺฉุงุฑ ูุงุดูโูุง ูุฌุงุฒ ุจุง Docker Machine           |
| `kubernetes`     | ุงุฌุฑุง job ุฏุฑ ฺฉ Pod ุฏุงุฎู ฺฉูุงุณุชุฑ Kubernetes              |
| `ssh`            | ุงุฌุฑุง job ุฑู ฺฉ ุณุฑูุฑ ุงุฒ ุฑุงู ุฏูุฑ ุงุฒ ุทุฑู SSH            |

> โ **ูุนูููโุชุฑู ุญุงูุช ุจุฑุง ูพุฑูฺูโูุง: `docker` ุง `shell`**

---

### โ ูุตุจ GitLab Runner (ุฑู ูููฺฉุณ)

```bash
# 1. ุฏุงูููุฏ
curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64

# 2. ูุฌูุฒ ุงุฌุฑุง
chmod +x /usr/local/bin/gitlab-runner

# 3. ูุตุจ ุจู ุนููุงู ุณุฑูุณ
gitlab-runner install
gitlab-runner start
```

---

### โ ุงุชุตุงู Runner ุจู GitLab

ุจุฑุง ุฑุฌุณุชุฑ ฺฉุฑุฏู Runner ุจู ูพุฑูฺูุ ุงู ุฏุณุชูุฑ ุฑู ูโุฒู:

```bash
gitlab-runner register
```

ู ุจุนุฏ:

1. URL ุฑูพุงุฒุชูุฑ GitLab ุฑู ูุงุฑุฏ ูโฺฉู (ูุซูุงู: `https://gitlab.com`)
2. Token ูพุฑูฺู ุฑู ูุงุฑุฏ ูโฺฉู (ุงุฒ ูุณูุช Settings > CI/CD > Runners)
3. ุชูุถุญ ุจุฑุง runner ูุงุฑุฏ ูโฺฉู (ุงุฎุชุงุฑ)
4. executor ููุฑุฏ ูุธุฑ (ูุซูุงู `docker`)
5. image ููุฑุฏ ูุธุฑ ุจุฑุง Docker (ูุซูุงู `node:16`)

---

### โ ููููู ูุงู `.gitlab-ci.yml` ุจุฑุง Runner ุจุง Docker

```yaml
image: node:16

stages:
  - test

test:
  stage: test
  script:
    - npm install
    - npm test
```

* ฺูู runner ุงุฒ ููุน docker ูุณุช ู image `node:16` ุฏุงุฏู ุดุฏูุ job ุฏุฑ ฺฉ ฺฉุงูุชูุฑ ุจุง NodeJS 16 ุงุฌุฑุง ูุดู.

---

### โ ฺฉุฌุง ุจุฏูู ฺู Runnerูุง ุฏุงุฑุ

ุฏุฑ GitLab UI ุจุฑู ุจู:

* **Project โ Settings โ CI/CD โ Runners**

  * Runners ูุนุงู ุฑู ูโุจู
  * ูโุชูู ุจุจู ฺฉุฏููโูุง Shared ู ฺฉุฏููโูุง Specific ูุณุชู

---

### โ ูฺฉุงุช ฺฉุงุฑุจุฑุฏ ู ูุตุงุญุจูโุง

| ุณูุงู ุงุญุชูุงู                          | ูพุงุณุฎ ุฎูุงุตู                                                                            |
| ------------------------------------- | ------------------------------------------------------------------------------------- |
| ูุฑู Shared ู Specific Runnerุ         | Shared ุจู ููู ูพุฑูฺูโูุง ูุดุชุฑฺฉูุ Specific ููุท ุจุฑุง ูพุฑูฺู ุดูุงุณุช.                        |
| ฺุฑุง ุงุฒ Docker Runner ุงุณุชูุงุฏู ูโฺฉููุ | ูุญุท isolated ู ูุงุจู ฺฉูุชุฑู ุงุฌุงุฏ ูโฺฉูู. ูโุชููู ุจุง image ุฏูุฎูุงู ุงุฌุฑุง ฺฉูู.          |
| ฺุทูุฑ Runner ุฑู ุงูู ูโฺฉูุ            | ุจุง ูุฑุงุฑ ุฏุงุฏูุด ุฏุฑ ุดุจฺฉู ุงููุ ูุญุฏูุฏ ฺฉุฑุฏู ุฏุณุชุฑุณ ุจู Tokenุ ุงุณุชูุงุฏู ุงุฒ Protected Variables |

---

ุงฺฏุฑ ุฎูุงุณุชุ ูโุชููู ุฑุงูููุง ูุตุจ ุจุฑุง ููุฏูุฒ ุง Docker Compose ูู ุจุฑุงุช ุจุงุฑูุ ุง ุชูุงูุช ุฏูู ุจู shell ู docker runner ุฑู ุจุง ูุซุงู ุจฺฏู.

ุฏุฑ **ูุณูุช ต** ูุฑุงุฑู ุจุฑู ุณุฑุงุบ `artifacts`ุ `cache` ู ุงูุชูุงู ูุงู ุจู jobูุง. ุจุฑูุ
